import{u as i,z as u,c as l}from"./index-880d652e.js";var o=null;const f=()=>{o=new WebSocket("wss://179374.azurewebsites.net");const e=i(),t=u();console.log("websocket connected!!"),o.onmessage=function(n){const c=l(()=>e.state.rooms);let s=JSON.parse(n.data);s.hasOwnProperty("updData")&&(s.updData.ROOMID==t.query.ROOMID?e.commit("setWsRes",s):c.value.filter(r=>r.ROOMID==s.updData.ROOMID)&&e.commit("m_updRooms",s.updData))},o.onerror=function(n){console.log("error",n)}},m=e=>{a(o,function(){o.readyState===1&&(console.log("message sent!!!"),o.send(JSON.stringify(e)))})};function a(e,t){console.log("socket.readyState",e.readyState),setTimeout(function(){e.readyState===1?(console.log("Connection is made"),t!=null&&t()):(console.log("wait for connection..."),a(e,t))},5)}export{f as c,m as s};
